<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ã‚¤ãƒ¼ã‚µãƒ³ã®Blind Box â€” Today</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="bg-anim" aria-hidden="true"></div>

  <header class="site-header">
    <h1 class="logo text-soft">ã‚¤ãƒ¼ã‚µãƒ³ã®Blind Box</h1>
    <nav>
      <a href="home.html" class="active">Today</a>
      <span>Â·</span>
      <a href="memories.html">Memories</a>
    </nav>
  </header>

  <main class="container">
    <!-- Centered scene with the blind box -->
    <section class="scene-wrap">
      <div class="scene">
        <div
          class="box-card"
          id="blindBox3D"
          role="button"
          tabindex="0"
          aria-label="Blind box"
          style="
            --img-front: url('assets/dice/front.png');
            --img-back: url('assets/dice/back.png');
            --img-left: url('assets/dice/left.png');
            --img-right: url('assets/dice/right.png');
            --img-bottom: url('assets/dice/bottom.png');
            --img-top: url('assets/dice/top.png');
          "
        >
          <div class="face front"></div>
          <div class="face back"></div>
          <div class="face right"></div>
          <div class="face left"></div>
          <div class="face bottom"></div>
          <div class="face top"></div>
        </div>
      </div>
      <p class="tiny-hint" id="tiny">tap the box âœ¨</p>
    </section>

    <!-- Present is rendered here by JS after CTA -->
    <section id="today-reveal" class="reveal-zone" hidden>
      <div id="today-content" class="card glass neon-soft" data-present-id="">
        <!-- JS fills this with CURRENT present -->
      </div>

      <!-- âœ… ADDED: like / tiny reply trigger (appears after reveal) -->
      <div id="feedback-trigger" class="like-wrap" hidden>
        <button id="likeBtn" class="icon-btn heart-btn" aria-haspopup="dialog" aria-controls="feedback-backdrop" aria-label="Send a heart or tiny note">â¤</button>
        <span class="muted tiny-inline">send a heart or a tiny note</span>
      </div>
      <!-- /ADDED -->
    </section>
  </main>

  <!-- Popup after spin finishes -->
  <div id="present-popup" class="popup-backdrop" hidden>
    <div class="popup-card glass neon-soft popup-in" role="dialog" aria-modal="true" aria-labelledby="popupTitle">
      <h3 id="popupTitle" class="popup-title">yay! ğŸ</h3>
      <p class="popup-text">tap below to get your present</p>
      <button id="ctaPresent" class="btn cta-glow">open the present</button>
    </div>
  </div>

  <!-- âœ… ADDED: feedback modal (heart / tiny reply) -->
  <div id="feedback-backdrop" class="popup-backdrop" hidden>
    <div class="popup-card glass neon-soft popup-in feedback-card" role="dialog" aria-modal="true" aria-labelledby="fbTitle">
      <h3 id="fbTitle" class="popup-title">send a little reply? ğŸ’Œ</h3>
      <p class="popup-text">you can just send a heart, or add a tiny note.</p>
      <textarea id="feedbackMessage" class="input textarea" maxlength="240" placeholder="(optional) write a tiny noteâ€¦"></textarea>
      <div class="row">
        <button id="sendHeart" class="btn cta-glow">Send â¤ï¸</button>
        <button id="cancelFeedback" class="btn">Cancel</button>
      </div>
      <p class="muted small" id="feedbackStatus" aria-live="polite"></p>
    </div>
  </div>
  <!-- /ADDED -->

  <!-- order matters: load data first, then logic -->
  <script src="presents.js"></script>
  <script src="script.js"></script>
  <script>authGuard(); bindLogout();</script>
</body>
</html>
